name: "Repo Sync"
description: "Force-sync the local branch(es) with the upstream repository"

on:
  schedule:
    # at 07:15 AM every day
    - cron: "15 7 * * *"
  workflow_dispatch:

permissions:
  contents: write

jobs:
  repo-sync:
    runs-on: ubuntu-24.04
    name: Repo sync

    steps:
      # https://github.com/actions/checkout
      - name: Checkout
        uses: actions/checkout@1af3b93b6815bc44a9784bd300feb67ff0d1eeb3 # v6.0.0
        with:
          persist-credentials: false

      # https://github.com/repo-sync/github-sync
      - name: Repo sync
        uses: repo-sync/github-sync@3832fe8e2be32372e1b3970bbae8e7079edeec88 # v2.3.0
        with:
          source_repo: https://git.kernel.org/pub/scm/linux/kernel/git/firmware/linux-firmware.git
          source_branch: "main"
          destination_branch: "main"
          github_token: ${{ secrets.GITHUB_TOKEN }}
          sync_tags: "true"
